<html>

<head>
  <title>Week 5 - Adventure Game</title>
</head>

<body>
  <script src="player.js"></script>
  <script src="monsters.js"></script>
  
  <h1>DnD</h1>
  
  <p id="on_page"> </p>
  
  <button id="attack">Attack</button>
  <button id="heal">Drink Potion</button>
  
  <script>
    var text = document.getElementById("on_page");

    var game = {
      user: player,
      monsters: listOfMonsters
    }

    function random(maxNumber) {
      return Math.floor(Math.random() * maxNumber);
    }

    var attack = document.getElementById("attack");
    attack.addEventListener("click", skirmish);

    var heal = document.getElementById("heal");
    heal.addEventListener("click", drink_potion);
    
    function skirmish(attack) {
      text.innerHTML = "Enemy Name: " + current_enemy + "<br>" + "Current Enemy HP: " + (current_hp_enemy -= hero_dmg) + "<br>" + "Current HP: " + (current_hero_hp -= current_enemy_dmg);
      if (current_hp_enemy <= 0) {
        alert("Congrats you won!") + location.reload();
      } else if (current_hero_hp <= 0) {
        alert("You lose!") + location.reload();
      }
    }
    
    function drink_potion(heal) {
      if(game.user.has_potion == true) {
        game.user.has_potion = false;
        text.innerHTML = "Current HP: " + (current_hero_hp + 10);
      } else {
      alert("You do not have any potions to use.")
      }
    }



    var current_enemy_index = random(game.monsters.length);
    console.log(current_enemy_index);

    var hero_dmg = random(game.user.dmg) + 1;

    var current_enemy = game.monsters[current_enemy_index].name;
    console.log("Enemy Name: " + current_enemy);

    var current_hp_enemy = game.monsters[current_enemy_index].hp;
    console.log("Enemy HP: " + current_hp_enemy);

    var current_hero_hp = game.user.hp;
    console.log("Current Hero HP: " + current_hero_hp);

    var current_hero_dmg = hero_dmg;
    console.log("Hero DMG: " + current_hero_dmg);

    var current_enemy_dmg = game.monsters[current_enemy_index].dmg
    console.log("Enemy DMG: " + current_enemy_dmg);

  </script>
</body>

</html>
